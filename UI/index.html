<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>exaLFR</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space Grotesk:wght@400;700&display=swap"/>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
<div class = "message_container">
    <div class = "message"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg></div>
</div>
<div class = "top_parts">
  <div class = "left_group">
    <button class = "data_push">PUSH DATA</button>
    <select class = "com">
      <option value="" disabled="" selected="">COM port</option>
    </select>
    <button class = "connect"><svg xmlns="http://www.w3.org/2000/svg" height="35px" viewBox="0 -960 960 960" width="35px" fill="#e8eaed"><path d="M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z"/></svg>CONNECT</button>
  </div>
  <div class = "IR_states">
    <div class = "horizontalSensors">
      <div class="IR0"></div>
      <div class="IR1"></div>
      <div class="IR2"></div>
      <div class="IR3"></div>
      <div class="IR4"></div>
      <div class="IR5"></div>
      <div class="IR6"></div>
      <div class="IR7"></div>
      <div class="IR8"></div>
      <div class="IR9"></div>
      <div class="IR10"></div>
      <div class="IR11"></div>
      <div class="IR12"></div>
      <div class="IR13"></div>
      <div class="IR14"></div>
      <div class="IR15"></div>
    </div>
  </div>
  <div class = "right_group">
    <div class = "timer">00:00:000</div>
    <div class = "voltageContainer">
      <div class = "voltage">--V</div>
    </div>
    <div class = "mode">
      <button class = "ctrl"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="m272-440 208 120 208-120-168-97v137h-80v-137l-168 97Zm168-189v-17q-44-13-72-49.5T340-780q0-58 41-99t99-41q58 0 99 41t41 99q0 48-28 84.5T520-646v17l280 161q19 11 29.5 29.5T840-398v76q0 22-10.5 40.5T800-252L520-91q-19 11-40 11t-40-11L160-252q-19-11-29.5-29.5T120-322v-76q0-22 10.5-40.5T160-468l280-161Zm0 378L200-389v67l280 162 280-162v-67L520-251q-19 11-40 11t-40-11Zm40-469q25 0 42.5-17.5T540-780q0-25-17.5-42.5T480-840q-25 0-42.5 17.5T420-780q0 25 17.5 42.5T480-720Zm0 560Z"/></svg></button>
      <button class = "pid"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-507h560v-133H200v133Zm0 214h560v-134H200v134Zm0 213h560v-133H200v133Zm40-454v-80h80v80h-80Zm0 214v-80h80v80h-80Zm0 214v-80h80v80h-80Z"/></svg></button>
      <div class = "highlighter"></div>
    </div>
  </div>
</div>

<div class = "pid_mode">
  <div class = "send_data_arguments">
    <div class = "pid_control_unit">
      <div class = "proportional">
        <div class = 'p_symbol'>K<span>p</span></div>
        <input  class = "p_slider" type="range" min="0" max="1000000" value="0">
        <input class = "p_value" type = "number" value = "0">
        <div class = "tooltip">
          <span class="tooltiptext">Max proportional impact</span>
          <input class = "p_impact" type = "number" value = "0">
        </div>
      </div>

      <div class = "integral">
        <div class = 'i_symbol'>K<span>i</span></div>
        <input  class = "i_slider" type="range" min="0" max="1000000" value="0">
        <input class = "i_value" type = "number" value = "0">
        <div class = "tooltip">
          <span class="tooltiptext">Max integral impact</span>
          <input class = "i_impact" type = "number" value = "0">
        </div>
      </div>

      <div class = "derivative">
        <div class = 'd_symbol'>K<span>d</span></div>
        <input  class = "d_slider" type="range" min="0" max="1000000" value="0">
        <input class = "d_value" type = "number" value = "0">
        <div class = "tooltip">
          <span class="tooltiptext">Max derivative impact</span>
          <input class = "d_impact" type = "number" value = "0">
        </div>
      </div>
    </div>
    <div class = "vertical_divider"></div>
    <div class = "additional_settings">
      <div class = "max_left_speed">
        <label>Max Left Speed: </label>
        <input class = "max_left" type="number" value="0">
      </div>
      <div class = "max_right_speed">
        <label>Max Right Speed: </label>
        <input class = "max_right" type="number" value="0">
      </div>
      <div class = "base_speed_group">
        <label>Base Speed: </label>
        <input class = "base_speed" type="number" value="0">
      </div>
      <div class = "turning_speed_group">
        <label>Turning Speed: </label>
        <input class = "turning_speed" type="number" value="0">
      </div>
    </div>
    <div class = "vertical_divider"></div>
    <div class = "additional_settings">
      <div class = "black_stop_duration_group">
        <label>Stop Duration(ms): </label>
        <input class = "black_stop_duration" type="number" value="0">
      </div>
      <div class = "hard_break_time_group">
        <label>hard break duration (ms): </label>
        <input class = "hard_break_time" type="number" value="0">
      </div>
      <div class = "hard_break_speed_group">
        <label>Hard break magnitude: </label>
        <input class = "hard_break_speed" type="number" value="0">
      </div>
    </div>
  </div>

  <div class = "err_group">
    <div class = "err_cnt">
      <canvas id="err_graph" class = "err_graph"></canvas>
    </div>
    <div class="play_pause_group">
      <button class = "play_pause"><svg xmlns="http://www.w3.org/2000/svg" height="35px" viewBox="0 -960 960 960" width="35px" fill="#e8eaed"><path d="M320-320h320v-320H320v320ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg></button>
      <button class = "start_follow">START FOLLOWING</button>
    </div>
  </div>
</div>

<div class = "ctrl_mode">
  <div class = "arrow_group">
    <div class = "top_arrow"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-528 296-344l-56-56 240-240 240 240-56 56-184-184Z"/></svg></div>
    <div class = "bottom_arrow"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"/></svg></div>

    <div class = "left_arrow"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M560-240 320-480l240-240 56 56-184 184 184 184-56 56Z"/></svg></div>
    <div class = "right_arrow"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"/></svg></div>
  </div>
  <input type="range" min="0" max="255" value="0" class="speed_slider">
  <div class = "speed_input_group">
    <div class = "percentage_value_group">
      <label for="percentage_value">Speed: </label>
      <input class = "percentage_value" type = "number" value="0">
    </div>
  </div>
  <div class = "ctrl_head">Use Keyboard or display Arrow keys to control the bot</div>
</div>

<div class = "historyWindow">
  <div class = "historyWindowMain">
    <button class = "closeHistory"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button>
    <div class = "historyHeader">Data History</div>
    <div class = "historyContent">
      <table class = "historyTable">
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>P</th>
            <th>I</th>
            <th>D</th>
            <th>Base Speed</th>
            <th>Max Left Speed</th>
            <th>Max Right Speed</th>
            <th>Turning Speed</th>
            <th>Hard Break Duration</th>
            <th>Hard Break Magnitude</th>
            <th>Stop Duration</th>
          </tr>
        </thead>
        <tbody class = "historyTableBody">
          <!-- History data will be populated here dynamically -->
        </tbody>
      </table>
    </div>
  </div>
</div>
<div class = "historyButton"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M320-160q-33 0-56.5-23.5T240-240v-120h120v-90q-35-2-66.5-15.5T236-506v-44h-46L60-680q36-46 89-65t107-19q27 0 52.5 4t51.5 15v-55h480v520q0 50-35 85t-85 35H320Zm120-200h240v80q0 17 11.5 28.5T720-240q17 0 28.5-11.5T760-280v-440H440v24l240 240v56h-56L510-514l-8 8q-14 14-29.5 25T440-464v104ZM224-630h92v86q12 8 25 11t27 3q23 0 41.5-7t36.5-25l8-8-56-56q-29-29-65-43.5T256-684q-20 0-38 3t-36 9l42 42Zm376 350H320v40h286q-3-9-4.5-19t-1.5-21Zm-280 40v-40 40Z"/></svg></div>
<div class = "mapButton"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M640-560v-126 126ZM174-132q-20 8-37-4.5T120-170v-560q0-13 7.5-23t20.5-15l212-72 240 84 186-72q20-8 37 4.5t17 33.5v337q-15-23-35.5-42T760-528v-204l-120 46v126q-21 0-41 3.5T560-546v-140l-160-56v523l-226 87Zm26-96 120-46v-468l-120 40v474Zm440-12q34 0 56.5-20t23.5-60q1-34-22.5-57T640-400q-34 0-57 23t-23 57q0 34 23 57t57 23Zm0 80q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 23-5.5 43.5T778-238l102 102-56 56-102-102q-18 11-38.5 16.5T640-160ZM320-742v468-468Z"/></svg></div>
</body>
<script src = 'inputs.js' type="module"></script>
<script src = './windows/mainWindow.js' type="module"></script>
<script src = './windows/controlWindow.js' type="module"></script>
<script src = './windows/historyWindow.js' type="module"></script>
</html>